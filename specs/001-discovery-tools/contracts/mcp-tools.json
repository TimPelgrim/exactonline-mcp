{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Exact Online MCP Tools",
  "description": "MCP tool definitions for Exact Online API discovery",
  "tools": [
    {
      "name": "list_divisions",
      "description": "List all accessible Exact Online divisions (administraties). Returns division codes, names, and current status.",
      "inputSchema": {
        "type": "object",
        "properties": {},
        "required": []
      },
      "outputSchema": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "code": {
              "type": "integer",
              "description": "Unique division identifier"
            },
            "name": {
              "type": "string",
              "description": "Display name of the division"
            },
            "is_current": {
              "type": "boolean",
              "description": "Whether this is the user's default division"
            }
          },
          "required": ["code", "name", "is_current"]
        }
      }
    },
    {
      "name": "explore_endpoint",
      "description": "Explore any Exact Online API endpoint with sample data. Returns records and available fields for discovery purposes.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "endpoint": {
            "type": "string",
            "description": "API endpoint path (e.g., 'crm/Accounts', 'sales/SalesInvoices')"
          },
          "division": {
            "type": "integer",
            "description": "Division code. If not specified, uses first available division."
          },
          "top": {
            "type": "integer",
            "description": "Maximum number of records to return (1-25, default 5)",
            "minimum": 1,
            "maximum": 25,
            "default": 5
          },
          "select": {
            "type": "string",
            "description": "Comma-separated list of fields to return (OData $select)"
          },
          "filter": {
            "type": "string",
            "description": "OData filter expression (e.g., \"Name eq 'Acme'\")"
          }
        },
        "required": ["endpoint"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "endpoint": {
            "type": "string",
            "description": "The requested endpoint path"
          },
          "division": {
            "type": "integer",
            "description": "Division code used for the query"
          },
          "count": {
            "type": "integer",
            "description": "Number of records returned"
          },
          "data": {
            "type": "array",
            "items": {
              "type": "object"
            },
            "description": "Sample records from the endpoint"
          },
          "available_fields": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Field names found in the response"
          }
        },
        "required": ["endpoint", "division", "count", "data", "available_fields"]
      }
    },
    {
      "name": "list_endpoints",
      "description": "List known Exact Online API endpoints grouped by category. Provides a starting point for API exploration.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "category": {
            "type": "string",
            "description": "Filter by category (crm, sales, financial, project, logistics)",
            "enum": ["crm", "sales", "financial", "project", "logistics"]
          }
        },
        "required": []
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "categories": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "path": {
                    "type": "string",
                    "description": "API endpoint path"
                  },
                  "description": {
                    "type": "string",
                    "description": "Human-readable description"
                  },
                  "typical_use": {
                    "type": "string",
                    "description": "Example use case"
                  }
                },
                "required": ["path", "description", "typical_use"]
              }
            },
            "description": "Endpoints grouped by category"
          }
        },
        "required": ["categories"]
      }
    }
  ],
  "errorResponses": {
    "AuthenticationError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string",
          "const": "Authentication required"
        },
        "action": {
          "type": "string",
          "description": "Instructions to re-authenticate"
        }
      }
    },
    "RateLimitError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string",
          "const": "Rate limit exceeded"
        },
        "retry_after": {
          "type": "integer",
          "description": "Seconds to wait before retrying"
        }
      }
    },
    "EndpointNotFoundError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string"
        },
        "endpoint": {
          "type": "string",
          "description": "The invalid endpoint path"
        }
      }
    }
  }
}
