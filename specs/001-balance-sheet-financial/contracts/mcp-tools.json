{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Balance Sheet & Financial Reporting MCP Tools",
  "description": "MCP tool definitions for financial reporting in exactonline-mcp",
  "tools": [
    {
      "name": "get_profit_loss_overview",
      "description": "Get profit and loss overview with year-over-year comparison. Returns revenue, costs, and result for current year vs previous year.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "division": {
            "type": "integer",
            "description": "Division code. If not specified, uses current division."
          }
        },
        "required": []
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "division": { "type": "integer" },
          "current_year": { "type": "integer" },
          "previous_year": { "type": "integer" },
          "currency_code": { "type": "string" },
          "revenue_current_year": { "type": "number" },
          "revenue_previous_year": { "type": "number" },
          "costs_current_year": { "type": "number" },
          "costs_previous_year": { "type": "number" },
          "result_current_year": { "type": "number" },
          "result_previous_year": { "type": "number" },
          "current_period": { "type": "integer" },
          "revenue_current_period": { "type": "number" },
          "costs_current_period": { "type": "number" },
          "result_current_period": { "type": "number" }
        }
      }
    },
    {
      "name": "get_gl_account_balance",
      "description": "Get the balance for a specific general ledger account (grootboekrekening). Returns amount, debit, credit for the specified period.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "account_code": {
            "type": "string",
            "description": "GL account code (e.g., '1300' for Debiteuren, '8000' for Omzet)."
          },
          "year": {
            "type": "integer",
            "description": "Fiscal year. Defaults to current year."
          },
          "period": {
            "type": "integer",
            "description": "Reporting period (1-12). Defaults to current period.",
            "minimum": 1,
            "maximum": 12
          },
          "division": {
            "type": "integer",
            "description": "Division code. If not specified, uses current division."
          }
        },
        "required": ["account_code"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "gl_account_code": { "type": "string" },
          "gl_account_description": { "type": "string" },
          "amount": { "type": "number" },
          "amount_debit": { "type": "number" },
          "amount_credit": { "type": "number" },
          "balance_type": { "type": "string", "enum": ["B", "W"] },
          "account_type": { "type": "integer" },
          "account_type_description": { "type": "string" },
          "reporting_year": { "type": "integer" },
          "reporting_period": { "type": "integer" }
        }
      }
    },
    {
      "name": "get_balance_sheet_summary",
      "description": "Get balance sheet summary with assets, liabilities, and equity totals grouped by category.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "year": {
            "type": "integer",
            "description": "Fiscal year. Defaults to current year."
          },
          "period": {
            "type": "integer",
            "description": "Reporting period (1-12). Defaults to current period.",
            "minimum": 1,
            "maximum": 12
          },
          "division": {
            "type": "integer",
            "description": "Division code. If not specified, uses current division."
          }
        },
        "required": []
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "division": { "type": "integer" },
          "reporting_year": { "type": "integer" },
          "reporting_period": { "type": "integer" },
          "currency_code": { "type": "string" },
          "total_assets": { "type": "number" },
          "total_liabilities": { "type": "number" },
          "total_equity": { "type": "number" },
          "assets": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "amount": { "type": "number" },
                "account_count": { "type": "integer" }
              }
            }
          },
          "liabilities": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "amount": { "type": "number" },
                "account_count": { "type": "integer" }
              }
            }
          },
          "equity": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "amount": { "type": "number" },
                "account_count": { "type": "integer" }
              }
            }
          }
        }
      }
    },
    {
      "name": "list_gl_account_balances",
      "description": "List all GL accounts with their balances, filterable by balance type (B=balance sheet, W=profit/loss) or account type.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "balance_type": {
            "type": "string",
            "enum": ["B", "W"],
            "description": "Filter by balance type: 'B' for balance sheet accounts, 'W' for P&L accounts."
          },
          "account_type": {
            "type": "integer",
            "description": "Filter by account type code (e.g., 20 for receivables, 110 for revenue)."
          },
          "year": {
            "type": "integer",
            "description": "Fiscal year. Defaults to current year."
          },
          "period": {
            "type": "integer",
            "description": "Reporting period (1-12). Defaults to current period.",
            "minimum": 1,
            "maximum": 12
          },
          "division": {
            "type": "integer",
            "description": "Division code. If not specified, uses current division."
          }
        },
        "required": []
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "division": { "type": "integer" },
          "reporting_year": { "type": "integer" },
          "reporting_period": { "type": "integer" },
          "total_accounts": { "type": "integer" },
          "accounts": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "gl_account_code": { "type": "string" },
                "gl_account_description": { "type": "string" },
                "amount": { "type": "number" },
                "balance_type": { "type": "string" },
                "account_type": { "type": "integer" },
                "account_type_description": { "type": "string" }
              }
            }
          }
        }
      }
    },
    {
      "name": "get_aging_receivables",
      "description": "Get aging report for outstanding receivables (debiteuren). Shows amounts by aging bucket (0-30, 31-60, 61-90, >90 days).",
      "inputSchema": {
        "type": "object",
        "properties": {
          "division": {
            "type": "integer",
            "description": "Division code. If not specified, uses current division."
          }
        },
        "required": []
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "division": { "type": "integer" },
          "currency_code": { "type": "string" },
          "total_outstanding": { "type": "number" },
          "total_0_30": { "type": "number" },
          "total_31_60": { "type": "number" },
          "total_61_90": { "type": "number" },
          "total_over_90": { "type": "number" },
          "customer_count": { "type": "integer" },
          "customers": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "account_id": { "type": "string" },
                "account_code": { "type": "string" },
                "account_name": { "type": "string" },
                "total_amount": { "type": "number" },
                "age_0_30": { "type": "number" },
                "age_31_60": { "type": "number" },
                "age_61_90": { "type": "number" },
                "age_over_90": { "type": "number" }
              }
            }
          }
        }
      }
    },
    {
      "name": "get_aging_payables",
      "description": "Get aging report for outstanding payables (crediteuren). Shows amounts by aging bucket (0-30, 31-60, 61-90, >90 days).",
      "inputSchema": {
        "type": "object",
        "properties": {
          "division": {
            "type": "integer",
            "description": "Division code. If not specified, uses current division."
          }
        },
        "required": []
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "division": { "type": "integer" },
          "currency_code": { "type": "string" },
          "total_outstanding": { "type": "number" },
          "total_0_30": { "type": "number" },
          "total_31_60": { "type": "number" },
          "total_61_90": { "type": "number" },
          "total_over_90": { "type": "number" },
          "supplier_count": { "type": "integer" },
          "suppliers": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "account_id": { "type": "string" },
                "account_code": { "type": "string" },
                "account_name": { "type": "string" },
                "total_amount": { "type": "number" },
                "age_0_30": { "type": "number" },
                "age_31_60": { "type": "number" },
                "age_61_90": { "type": "number" },
                "age_over_90": { "type": "number" }
              }
            }
          }
        }
      }
    },
    {
      "name": "get_gl_account_transactions",
      "description": "Get individual transactions for a specific GL account. Enables drill-down from account balance to transaction detail.",
      "inputSchema": {
        "type": "object",
        "properties": {
          "account_code": {
            "type": "string",
            "description": "GL account code (e.g., '1300' for Debiteuren, '8000' for Omzet)."
          },
          "year": {
            "type": "integer",
            "description": "Fiscal year filter. If not specified with period, uses date range or returns recent transactions."
          },
          "period": {
            "type": "integer",
            "description": "Reporting period (1-12). Used with year parameter.",
            "minimum": 1,
            "maximum": 12
          },
          "start_date": {
            "type": "string",
            "description": "Start date filter (YYYY-MM-DD). Alternative to year/period filtering."
          },
          "end_date": {
            "type": "string",
            "description": "End date filter (YYYY-MM-DD). Used with start_date."
          },
          "limit": {
            "type": "integer",
            "description": "Maximum number of transactions to return. Defaults to 100.",
            "default": 100,
            "minimum": 1,
            "maximum": 1000
          },
          "division": {
            "type": "integer",
            "description": "Division code. If not specified, uses current division."
          }
        },
        "required": ["account_code"]
      },
      "outputSchema": {
        "type": "object",
        "properties": {
          "division": { "type": "integer" },
          "gl_account_code": { "type": "string" },
          "gl_account_description": { "type": "string" },
          "total_transactions": { "type": "integer" },
          "transactions": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "date": { "type": "string" },
                "financial_year": { "type": "integer" },
                "financial_period": { "type": "integer" },
                "description": { "type": "string" },
                "amount": { "type": "number" },
                "entry_number": { "type": "integer" },
                "journal_code": { "type": "string" }
              }
            }
          }
        }
      }
    }
  ]
}
